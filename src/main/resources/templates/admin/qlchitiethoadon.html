<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>T&T</title>
    <link rel="icon" type="image/png" href="../dist/img/logo_tt.png">
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!--Nhúng Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Tempusdominus Bootstrap 4 -->
    <link rel="stylesheet" href="../plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="../plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <!-- JQVMap -->
    <link rel="stylesheet" href="../plugins/jqvmap/jqvmap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../dist/css/adminlte.min.css">
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="../plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="../plugins/daterangepicker/daterangepicker.css">
    <!-- summernote -->
    <link rel="stylesheet" href="../plugins/summernote/summernote-bs4.min.css">
    <!-- cdn-bootstrap icon -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<style>
    .timeline {
        display: flex;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
    }

    .timeline-item {
        flex-shrink: 0;
        width: 200px;
        padding: 10px;
        margin: 0 10px;
        background-color: #f4f4f4;
        /* Màu nền mặc định */
        border-radius: 6px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        display: flex;
        /* Thêm dòng này để sử dụng flexbox */
        flex-direction: column;
        /* Canh chỉnh các phần tử theo chiều dọc */
        align-items: center;
        /* Canh chỉnh các phần tử theo chiều ngang */
    }

    .badge-primary {
        background-color: #007bff;
    }

    /* Optional: Adjust image size */
    .status-icon {
        width: 50px;
        height: auto;
        margin-bottom: 10px;
    }

    .timeline-item:nth-child(odd) {
        background-color: #ffd700;
        /* Màu vàng */
    }

    .timeline-item:nth-child(even) {
        background-color: #7CFC00;
        /* Màu xanh lá */
    }
</style>

<body class="hold-transition sidebar-mini layout-fixed" style="font-family: 'Bahnschrift'">

    <div class="wrapper">
        <!-- Ban đầu mở là hiển thị logo thương hiệu -->
        <!-- end -->

        <!-- navbar-->
        <nav th:replace="~{/layoutadmin/navbar.html}"></nav>
        <!-- End navbar -->

        <!--menu bán hàng -->
        <nav th:replace="~{/layoutadmin/menu.html}"></nav>
        <!--end menu -->


        <!-- narbar home/quản lý chi tiet hóa đơn -->
        <div class="content-wrapper">
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <!--                        <h5 class="m-0" style="color: grey">< Đơn hàng</h5>-->
                            <!--                        &lt;!&ndash;Tên hóa đơn&ndash;&gt;-->
                            <!--                        <p><h2 class="m-0">HD123456</h2> <h5 class="m-0" style="color: grey">25/11/2023 15:40 </h5></p>-->
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active">Quản lý chi tiết hóa đơn</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.content-header -->

            <!--timeline-->
            <div class="row g-3 container-fluid">
                <!--Nội dung chính timeline-->
                <section class="content">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12">
                                <div class="card" style="height: 350px;">
                                    <div class="card-header">
                                        <hr class="border border-danger border-2 opacity-50">
                                        <!--smkds-->
                                        <div class="container">
                                            <div class="row">
                                                <div class="col">
                                                    <div id="timeline" class="timeline">
                                                        <div class="timeline-item" th:each="a:${lstlichsu}">
                                                            <h1 th:if="${a.trangthai==0}"><i
                                                                    class="bi bi-check-circle"></i></h1>
                                                            <h1 th:if="${a.trangthai==1}"><i
                                                                    class="bi bi-check-circle-fill"></i></h1>
                                                            <h1 th:if="${a.trangthai==2}"><i
                                                                    class="bi bi-cart-check-fill"></i></h1>
                                                            <h1 th:if="${a.trangthai==3}"><i class="bi bi-truck"></i>
                                                            </h1>
                                                            <h1 th:if="${a.trangthai==4}"><i
                                                                    class="bi bi-cash-coin"></i></h1>
                                                            <h1 th:if="${a.trangthai==5}"><i
                                                                    class="bi bi-check-all"></i></h1>
                                                            <h1 th:if="${a.trangthai==6}"><i class="bi bi-trash"></i>
                                                            </h1>
                                                            <h3 th:if="${a.trangthai==0}">Chờ xác nhận</h3>
                                                            <h3 th:if="${a.trangthai==1}">Đã xác nhận</h3>
                                                            <h3 th:if="${a.trangthai==2}">Chờ giao hàng</h3>
                                                            <h3 th:if="${a.trangthai==3}">Đang giao hàng</h3>
                                                            <h3 th:if="${a.trangthai==4}">Đã thanh toán</h3>
                                                            <h3 th:if="${a.trangthai==5}">Hoàn thành đơn</h3>
                                                            <h3 th:if="${a.trangthai==6}">Đã hủy đơn</h3>
                                                            <p th:text="${a.ngaytao}"></p>
                                                        </div>
                                                    </div>
                                                    <p></p>
                                                    <button class="btn btn-danger" th:if="${trangThaiHienTai<3}"
                                                        data-bs-toggle="modal" data-bs-target="#huy">Hủy</button>
                                                    <button class="btn btn-warning"
                                                        th:if="${trangThaiHienTai > 0 and trangThaiHienTai < 5}"
                                                        data-bs-toggle="modal" data-bs-target="#quaylai">Quay
                                                        lại</button>
                                                    <button th:if="${trangThaiHienTai==0}" class="btn btn-primary"
                                                        data-bs-toggle="modal" data-bs-target="#xacnhan">Xác
                                                        nhận</button>
                                                    <button th:if="${trangThaiHienTai==1}" class="btn btn-primary"
                                                        data-bs-toggle="modal" data-bs-target="#chogiao">Chờ
                                                        giao</button>
                                                    <button th:if="${trangThaiHienTai==2}" class="btn btn-primary"
                                                        data-bs-toggle="modal" data-bs-target="#vanchuyen">Vận
                                                        chuyển</button>
                                                    <button th:if="${trangThaiHienTai==3}" class="btn btn-primary"
                                                        data-bs-toggle="modal" data-bs-target="#thanhtoan">Thanh
                                                        toán</button>
                                                    <button th:if="${trangThaiHienTai==4}" class="btn btn-primary"
                                                        data-bs-toggle="modal" data-bs-target="#hoanthanh">Hoàn
                                                        thành</button>
                                                    <button class="btn btn-dark" data-bs-toggle="modal"
                                                        data-bs-target="#lichsu" style="margin-left: 805px">Lịch
                                                        sử</button>
                                                    <!-- Button trigger modal lịch sử -->

                                                    <!-- Modal lịch sử -->
                                                    <div class="modal fade" id="lichsu" tabindex="-1"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog modal-xl">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Lịch sử</h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <table id="example2"
                                                                        class="table table-bordered table-hover text-center">
                                                                        <thead class="table table-danger">
                                                                            <tr>
                                                                                <th>STT</th>
                                                                                <th>Trạng thái</th>
                                                                                <th>Ngày xác nhận</th>
                                                                                <th>Người xác nhận</th>
                                                                                <th>Ghi chú</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr th:each="a:${lstlichsu}">
                                                                                <td th:text="${aStat.index+1}"></td>
                                                                                <td th:if="${a.trangthai==0}">chờ xác
                                                                                    nhận</td>
                                                                                <td th:if="${a.trangthai==1}">đã xác
                                                                                    nhận</td>
                                                                                <td th:if="${a.trangthai==2}">chờ giao
                                                                                    hàng</td>
                                                                                <td th:if="${a.trangthai==3}">đang giao
                                                                                    hàng</td>
                                                                                <td th:if="${a.trangthai==4}">đã thanh
                                                                                    toán</td>
                                                                                <td th:if="${a.trangthai==5}">đã hoàn
                                                                                    thành</td>
                                                                                <td th:if="${a.trangthai==6}">đã hủy
                                                                                </td>
                                                                                <td
                                                                                    th:text="${ #dates.format(a.ngaytao, 'dd-MM-yyyy HH:mm:ss')}">
                                                                                </td>
                                                                                <td
                                                                                    th:text="${a.nhanvien.nguoidung.hovaten}">
                                                                                </td>
                                                                                <td th:text="${a.ghichu}"></td>
                                                                            </tr>
                                                                            </tfoot>
                                                                    </table>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary"
                                                                        data-bs-dismiss="modal">Thoát</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- Button trigger modal xac nhan -->

                                                    <!-- Modal xác nhận -->
                                                    <div class="modal fade" id="xacnhan" tabindex="-1"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Xác nhận đơn hàng</h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form th:action="@{xac-nhan-don}" method="get"
                                                                        th:object="${ghichu}">
                                                                        <input placeholder="Nhập nội dung mô tả..."
                                                                            oninput="validateInput(this)" id="xacnhan"
                                                                            style="padding-left: 25px; margin-bottom: 20px; height: 100px;"
                                                                            class="form-control" th:field="*{key}">
                                                                        <label
                                                                            style="position: absolute; top: 0; left: 25px; background-color: white; padding: 0 5px; font-size: 18px; color: #999;">Mô
                                                                            tả</label>
                                                                        <p>
                                                                            <i id="xacnhaner" style="color: red;"></i>
                                                                        </p>

                                                                        <div class="d-flex flex-row-reverse">
                                                                            <button type="submit" id="xacnhanbtn"
                                                                                disabled class="btn btn-primary">Xác
                                                                                nhận</button>
                                                                            <button type="button"
                                                                                class="btn btn-secondary ms-1"
                                                                                data-bs-dismiss="modal">Hủy</button>

                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="modal fade" id="huy" tabindex="-1"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Hủy đơn</h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form th:action="@{huy-don}" method="get"
                                                                        th:object="${ghichu}">

                                                                        <input placeholder="Nhập nội dung mô tả..."
                                                                            oninput="validateInput(this)" id="huy"
                                                                            style="padding-left: 25px; margin-bottom: 20px; height: 100px;"
                                                                            class="form-control" th:field="*{key}">
                                                                        <label
                                                                            style="position: absolute; top: 0; left: 25px; background-color: white; padding: 0 5px; font-size: 18px; color: #999;">Mô
                                                                            tả</label>
                                                                        <p>
                                                                            <i id="huyer" style="color: red;"></i>
                                                                        </p>

                                                                        <div class="d-flex flex-row-reverse">
                                                                            <button type="submit" id="huybtn" disabled
                                                                                class="btn btn-primary">Xác
                                                                                nhận</button>
                                                                            <button type="button"
                                                                                class="btn btn-secondary ms-1"
                                                                                data-bs-dismiss="modal">Hủy</button>

                                                                        </div>
                                                                    </form>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="modal fade" id="quaylai" tabindex="-1"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Quay lại</h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form th:action="@{quay-lai}" method="get"
                                                                        th:object="${ghichu}">

                                                                        <input placeholder="Nhập nội dung mô tả..."
                                                                            oninput="validateInput(this)" id="quaylai"
                                                                            style="padding-left: 25px; margin-bottom: 20px; height: 100px;"
                                                                            class="form-control" th:field="*{key}">
                                                                        <label
                                                                            style="position: absolute; top: 0; left: 25px; background-color: white; padding: 0 5px; font-size: 18px; color: #999;">Mô
                                                                            tả</label>
                                                                        <p>
                                                                            <i id="quaylaier" style="color: red;"></i>
                                                                        </p>

                                                                        <div class="d-flex flex-row-reverse">
                                                                            <button type="submit" id="quaylaibtn"
                                                                                disabled class="btn btn-primary">Xác
                                                                                nhận</button>
                                                                            <button type="button"
                                                                                class="btn btn-secondary ms-1"
                                                                                data-bs-dismiss="modal">Hủy</button>

                                                                        </div>
                                                                    </form>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- <div class="modal fade" id="chogiao" aria-hidden="true"
                                                        aria-labelledby="exampleModalToggleLabel" tabindex="-1">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5"
                                                                        id="exampleModalToggleLabel">Thông tin hóa đơn
                                                                    </h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    thông tin hóa đơn hiển thị
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button class="btn btn-primary"
                                                                        data-bs-target="#exampleModalToggle2"
                                                                        data-bs-toggle="modal">
                                                                        lưu lại
                                                                    </button>
                                                                    <button class="btn btn-primary"
                                                                        data-bs-target="#exampleModalToggle2"
                                                                        data-bs-toggle="modal">
                                                                        Bỏ qua
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div> -->
                                                    <div class="modal fade" id="chogiao" aria-hidden="true"
                                                        aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    Chờ giao đơn
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form th:action="@{xac-nhan-don}" method="get"
                                                                        th:object="${ghichu}">

                                                                        <input placeholder="Nhập nội dung mô tả..."
                                                                            oninput="validateInput(this)" id="chogiao"
                                                                            style="padding-left: 25px; margin-bottom: 20px; height: 100px;"
                                                                            class="form-control" th:field="*{key}">
                                                                        <label
                                                                            style="position: absolute; top: 0; left: 25px; background-color: white; padding: 0 5px; font-size: 18px; color: #999;">Mô
                                                                            tả</label>
                                                                        <p>
                                                                            <i id="chogiaoer" style="color: red;"></i>
                                                                        </p>


                                                                        <div class="d-flex flex-row-reverse">
                                                                            <button type="submit" id="chogiaobtn"
                                                                                onclick="xacnhanngaygiao()" disabled
                                                                                class="btn btn-primary">Xác
                                                                                nhận</button>
                                                                            <button type="button"
                                                                                class="btn btn-secondary ms-1"
                                                                                data-bs-dismiss="modal">Hủy</button>

                                                                        </div>
                                                                    </form>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="modal fade" id="vanchuyen" tabindex="-1"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Vận chuyển</h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form th:action="@{xac-nhan-don}" method="get"
                                                                        th:object="${ghichu}">

                                                                        <input placeholder="Nhập nội dung mô tả..."
                                                                            oninput="validateInput(this)" id="vanchuyen"
                                                                            style="padding-left: 25px; margin-bottom: 20px; height: 100px;"
                                                                            class="form-control" th:field="*{key}">

                                                                        <label
                                                                            style="position: absolute; top: 0; left: 25px; background-color: white; padding: 0 5px; font-size: 18px; color: #999;">Mô
                                                                            tả</label>
                                                                        <p>
                                                                            <i id="vanchuyener" style="color: red;"></i>
                                                                        </p>


                                                                        <div class="d-flex flex-row-reverse">
                                                                            <button type="submit" id="vanchuyenbtn"
                                                                                disabled class="btn btn-primary">Xác
                                                                                nhận</button>
                                                                            <button type="button"
                                                                                class="btn btn-secondary ms-1"
                                                                                data-bs-dismiss="modal">Hủy</button>

                                                                        </div>
                                                                    </form>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="modal fade" id="thanhtoan" tabindex="-1"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Thanh toán</h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form th:action="@{xac-nhan-don}" method="get"
                                                                        th:object="${ghichu}">

                                                                        <input placeholder="Nhập nội dung mô tả..."
                                                                            oninput="validateInput(this)" id="thanhtoan"
                                                                            style="padding-left: 25px; margin-bottom: 20px; height: 100px;"
                                                                            class="form-control" th:field="*{key}">
                                                                        <label
                                                                            style="position: absolute; top: 0; left: 25px; background-color: white; padding: 0 5px; font-size: 18px; color: #999;">Mô
                                                                            tả</label>
                                                                        <p>
                                                                            <i id="thanhtoaner" style="color: red;"></i>
                                                                        </p>

                                                                        <div class="d-flex flex-row-reverse">
                                                                            <button type="submit" id="thanhtoanbtn"
                                                                                disabled class="btn btn-primary">Xác
                                                                                nhận</button>
                                                                            <button type="button"
                                                                                class="btn btn-secondary ms-1"
                                                                                data-bs-dismiss="modal">Hủy</button>

                                                                        </div>
                                                                    </form>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="modal fade" id="hoanthanh" tabindex="-1"
                                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Hoàn thành đơn</h1>
                                                                    <button type="button" class="btn-close"
                                                                        data-bs-dismiss="modal"
                                                                        aria-label="Close"></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <form th:action="@{xac-nhan-don}" method="get"
                                                                        th:object="${ghichu}">

                                                                        <input placeholder="Nhập nội dung mô tả..."
                                                                            oninput="validateInput(this)" id="hoanthanh"
                                                                            style="padding-left: 25px; margin-bottom: 20px; height: 100px;"
                                                                            class="form-control" th:field="*{key}">
                                                                        <label
                                                                            style="position: absolute; top: 0; left: 25px; background-color: white; padding: 0 5px; font-size: 18px; color: #999;">Mô
                                                                            tả</label>
                                                                        <p>
                                                                            <i id="hoanthanher" style="color: red;"></i>
                                                                        </p>

                                                                        <div class="d-flex flex-row-reverse">
                                                                            <button type="submit" id="hoanthanhbtn"
                                                                                disabled class="btn btn-primary">Xác
                                                                                nhận</button>
                                                                            <button type="button"
                                                                                class="btn btn-secondary ms-1"
                                                                                data-bs-dismiss="modal">Hủy</button>

                                                                        </div>
                                                                    </form>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--smkds-->
                                    </div>
                                </div>
                                <!-- /.card -->
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.container-fluid -->
                </section>
                <!--end-->
            </div>
            <!--end-->

            <!--lịch sử thanh toán-->
            <div class="row g-3 container-fluid">
                <!--Nội dung chính lịch sử thanh toán-->
                <section class="content">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <hr class="border border-danger border-2 opacity-50">
                                        <!--smkds-->
                                        <h3>Lịch sử thanh toán</h3>
                                        <table id="example2" class="table table-bordered table-hover text-center">
                                            <thead class="table table-danger">
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Mã giao dịch</th>
                                                    <th>Số tiền</th>
                                                    <th>Trạng thái</th>
                                                    <th>Thời gian</th>
                                                    <th>Loại giao dịch</th>
                                                    <th>Phương thức thanh toán</th>
                                                    <th>Ghi chú</th>
                                                    <th>Người xác nhận</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="a:${lstphuongThucTT}">
                                                    <td th:text="${aStat.index+1}"></td>
                                                    <td th:text="${a.magiaodichvnpay}"></td>
                                                    <td
                                                        th:text="${#numbers.formatDecimal(a.tongtien, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}">
                                                    </td>
                                                    <td>
                                                        <p style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;"
                                                            th:text="${a.trangthai==true?'Thành công':'Chưa thành công'}">
                                                        </p>
                                                    </td>
                                                    <td th:text="${ #dates.format(a.ngaytao, 'dd-MM-yyyy HH:mm:ss')}">
                                                    </td>
                                                    <td>
                                                        <p style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;"
                                                            th:text="${a.tenphuongthuc}"></p>
                                                    </td>
                                                    <td>
                                                        <p style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;"
                                                            th:text="${a.mota}"></p>
                                                    </td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                </tfoot>
                                        </table>
                                        <!--smkds-->
                                    </div>
                                </div>
                                <!-- /.card -->
                            </div>
                            <!-- /.col -->
                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.container-fluid -->
                </section>
                <!--end-->
            </div>
            <!--end-->

            <div class="row g-3 container-fluid">
                <div class="col-lg-8 col-md-8">
                    <!--Nội dung chính chi tiet hóa đơn-->
                    <section class="content">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-12">
                                    <div class="card" style="height: 326px;">
                                        <div class="card-header">
                                            <div class="d-flex justify-content-between align-content-center">
                                                <h4 th:text="${'Thông tin đơn hàng: '+hoaDonDT.mahoadon}">
                                                </h4>
                                                <div>
                                                    <button type="button" class="btn btn-outline-secondary"
                                                        data-bs-toggle="modal" data-bs-target="#modalThayDoiHoaDon"
                                                        th:classappend="${trangThaiHienTai!=0?'disabled':''}">Thay
                                                        đổi</button>
                                                    <button type="button" class="btn btn-outline-secondary"
                                                        id="changeNV" data-bs-toggle="modal"
                                                        data-bs-target="#modalChuyenNhanVien"
                                                        th:classappend="${trangThaiHienTai!=0?'disabled':''}">Chuyển
                                                        nhân viên</button>
                                                </div>

                                                <!--Modal thay đổi thông tin hóa đơn-->
                                                <!-- Modal -->
                                                <div class="modal fade" id="modalThayDoiHoaDon" tabindex="-1"
                                                    aria-labelledby="exampleModalThayDoiHoaDon" aria-hidden="true">
                                                    <div class="modal-dialog modal-dialog-scrollable">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h3 class="modal-title fs-5"
                                                                    id="exampleModalThayDoiHoaDon">Thay đổi thông tin
                                                                    hóa đơn</h3>
                                                                <button type="button" class="btn-close"
                                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <form class="row g-3" th:action="@{ChangesTTHD}"
                                                                    method="post" th:object="${thayDoiTT}"
                                                                    onsubmit="return run()">
                                                                    <div class="col-md-12">
                                                                        <label class="form-label">Tên khách
                                                                            hàng:</label>
                                                                        <input type="text" class="form-control" required
                                                                            th:field="*{ten}">

                                                                    </div>
                                                                    <div class="col-md-12">
                                                                        <label class="form-label">Số điện thoại:</label>
                                                                        <input type="text" class="form-control" required
                                                                            th:field="*{sdt}">

                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label class="form-label">Tỉnh/Thành
                                                                            Phố:</label>
                                                                        <select class="form-select form-select-sm mb-3"
                                                                            id="city" th:field="*{tinh}">
                                                                            <option value="" th:text="*{tinh}" selected>
                                                                                Chọn tỉnh thành</option>
                                                                        </select>

                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label class="form-label">Quận/Huyện:</label>
                                                                        <select class="form-select form-select-sm mb-3"
                                                                            id="district" th:field="*{huyen}">
                                                                            <option value="" th:text="*{huyen}"
                                                                                selected>Chọn quận huyện</option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="col-md-4">
                                                                        <label class="form-label">Phường/Xã: </label>
                                                                        <select class="form-select form-select-sm"
                                                                            id="ward" th:field="*{xa}">
                                                                            <option value="" th:text="*{xa}" selected>
                                                                                Chọn phường xã</option>
                                                                        </select>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <label class="form-label">Địa chỉ cụ
                                                                            thể:</label>
                                                                        <input type="text" class="form-control"
                                                                            th:field="*{diachiCT}">
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <label class="form-label">Phí giao hàng:</label>
                                                                        <input type="text" class="form-control" required
                                                                            th:field="*{phigiao}">

                                                                    </div>
                                                                    <div class="col-12">
                                                                        <label class="form-label">Ghi chú:</label>
                                                                        <textarea class="form-control"
                                                                            th:field="*{ghichu}" rows="3"></textarea>
                                                                    </div>
                                                                    <button type="submit" class="btn btn-primary">Xác
                                                                        nhận</button>
                                                                </form>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="button" class="btn btn-secondary"
                                                                    data-bs-dismiss="modal">Hủy</button>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--/Kết thúc modal thay đổi thông tin-->

                                                <!--Modal thay đổi nhân viên-->
                                                <!-- Modal -->
                                                <div class="modal fade" id="modalChuyenNhanVien" tabindex="-1"
                                                    aria-labelledby="exampleModalChuyenNhanVien" aria-hidden="true">
                                                    <div class="modal-dialog modal-xl">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h3 class="modal-title fs-5"
                                                                    id="exampleModalChuyenNhanVien">Chuyển nhân viên
                                                                </h3>
                                                                <button type="button" class="btn-close"
                                                                    data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body">
                                                                <div class="card-body">
                                                                    <div
                                                                        class="d-flex justify-content-between align-items-center">
                                                                        <div>
                                                                            <p style="font-family: 'Times New Roman'; font-size: 18px; font-weight: bold;"
                                                                                th:text="${'Nhân viên hiện tại: '+hoaDonDT.nhanvien.nguoidung.hovaten}">
                                                                            </p>
                                                                            <p style="font-family: 'Times New Roman'; font-size: 18px; font-weight: bold;"
                                                                                th:text="${'Mã nhân viên: ' +hoaDonDT.nhanvien.manhanvien}">
                                                                            </p>
                                                                        </div>
                                                                        <nav class="navbar bg-body-tertiary">
                                                                            <div class="container-fluid">
                                                                                <form class="d-flex" role="search">
                                                                                    <input class="form-control me-2"
                                                                                        type="search"
                                                                                        placeholder="Nhập mã nhân viên..."
                                                                                        aria-label="Search"
                                                                                        id="searchNV">
                                                                                    <button type="button" id="reloadnv"
                                                                                        class="btn btn-outline-warning"><i
                                                                                            class="bi bi-arrow-clockwise"></i></button>
                                                                                </form>
                                                                            </div>
                                                                        </nav>
                                                                    </div>


                                                                    <table
                                                                        class="table table-bordered table-hover text-center">
                                                                        <thead class="table table-danger">
                                                                            <tr>
                                                                                <th>STT</th>
                                                                                <th>Mã nhân viên</th>
                                                                                <th>Tên nhân viên</th>
                                                                                <th>Số điện thoại</th>
                                                                                <th>Ngày sinh</th>
                                                                                <th>Giới tính</th>
                                                                                <th>Thao tác</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody id="tbl_doi_nv">

                                                                        </tbody>
                                                                    </table>
                                                                    <br>
                                                                    <nav aria-label="Page navigation example"
                                                                        id="navNV">
                                                                        <ul class="pagination">
                                                                            <li class="page-item" id="btn_prev_page"><a
                                                                                    class="page-link"
                                                                                    id="prevPage">Previous</a>
                                                                            </li>
                                                                            <li class="d-flex flex-row page-item"
                                                                                id="numberPage">
                                                                            </li>
                                                                            <li class="page-item" id="btn_next_page">
                                                                                <a class="page-link"
                                                                                    id="nextPage">Next</a>
                                                                            </li>
                                                                        </ul>
                                                                    </nav>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--Kết thúc modal thay đổi nhân viên-->
                                            </div>
                                            <hr class="border border-danger border-2 opacity-50">
                                            <div class="row g-3">
                                                <div class="col-lg-7 col-md-7">
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Trạng thái:</h6>
                                                        <p th:if="${hoaDonDT.trangthai==0}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            Chờ xác nhận</p>
                                                        <p th:if="${hoaDonDT.trangthai==1}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            Đã xác nhận</p>
                                                        <p th:if="${hoaDonDT.trangthai==2}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            Chờ giao hàng</p>
                                                        <p th:if="${hoaDonDT.trangthai==3}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            Đang giao hàng</p>
                                                        <p th:if="${hoaDonDT.trangthai==4}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            Đã thanh toán</p>
                                                        <p th:if="${hoaDonDT.trangthai==5}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            Đã hoàn thành</p>
                                                        <p th:if="${hoaDonDT.trangthai==6}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            Đã hủy</p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Loại:</h6>
                                                        <p th:if="${hoaDonDT.loaihoadon==true}"
                                                            style="margin-left: 50px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            online</p>
                                                        <p th:if="${hoaDonDT.loaihoadon==false}"
                                                            style="margin-left: 50px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                            offline</p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Địa chỉ:</h6>
                                                        <p th:text="${hoaDonDT.diachi}"
                                                            style="margin-left: 34px; font-family: 'Times New Roman'; font-size: 15px;">
                                                        </p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Ngày tạo:</h6>
                                                        <p th:text="${ #dates.format(hoaDonDT.ngaytao, 'dd-MM-yyyy HH:mm:ss')}"
                                                            style="margin-left: 20px; font-family: 'Times New Roman'; font-size: 15px;">
                                                        </p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Ghi chú:</h6>
                                                        <p th:text="${hoaDonDT.ghichu}"
                                                            style=" margin-left: 24px;font-family: 'Times New Roman'; font-size: 15px;">
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="col-lg-5 col-md-5">
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Loại giao dịch:</h6>
                                                        <p th:text="${phuongThucTT.tenphuongthuc}"
                                                            style="margin-left: 79px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                        </p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Phương thức thanh toán:</h6>
                                                        <p th:text="${phuongThucTT.mota}"
                                                            style="margin-left: 10px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                        </p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Tên khách hàng:</h6>
                                                        <p th:text="${hoaDonDT.tennguoinhan}"
                                                            style="margin-left: 70px; font-family: 'Times New Roman'; font-size: 15px;">
                                                        </p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">Số
                                                            điện thoại:</h6>
                                                        <p th:text="${hoaDonDT.sdt}"
                                                            style="margin-left: 90px; font-family: 'Times New Roman'; font-size: 15px;">
                                                        </p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Ngày giao dự kiến:</h6>
                                                        <p th:text="${hoaDonDT.ngaygiaodukien==null?' -------':#dates.format(hoaDonDT.ngaygiaodukien, 'dd-MM-yyyy')}"
                                                            style="margin-left: 53px; font-family: 'Times New Roman'; font-size: 15px;">
                                                            25/12/2024</p>
                                                    </div>
                                                    <div class="d-flex justify-content-start">
                                                        <h6 style="font-family: 'Times New Roman'; font-weight: bold">
                                                            Hình thức giao:</h6>
                            
                                                           <p th:text="${hoaDonDT.hoatoc==true?'Hỏa tốc':'Thông thường'}"
                                                            style="margin-left: 75px; font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;">
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <!-- /.card -->
                                </div>
                                <!-- /.col -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <!-- /.container-fluid -->
                    </section>
                </div>
                <div class="col-lg-4 col-md-4">
                    <!--Nội dung chính chi tiet hóa đơn-->
                    <section class="content">
                        <div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h3>Chi phí đơn hàng</h3>
                                            <hr class="border border-danger border-2 opacity-50">
                                            <div class="d-flex justify-content-between">
                                                <h6 style="font-family: 'Times New Roman'; font-weight: bold">Tổng tiền
                                                    đơn hàng:</h6>
                                                <p th:text="${#numbers.formatDecimal(tongTienSP, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}"
                                                    style="font-family: 'Times New Roman'; font-size: 16px; color: red">
                                                </p>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <h6 style="font-family: 'Times New Roman'; font-weight: bold">Phí giao
                                                    hàng:</h6>
                                                <p th:text="${#numbers.formatDecimal(hoaDonDT.phivanchuyen, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}"
                                                    style="font-family: 'Times New Roman'; font-size: 16px;">
                                                </p>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <h6 style="font-family: 'Times New Roman'; font-weight: bold">Phiếu giảm
                                                    giá
                                                    :</h6>
                                                <p th:text="${phieuGiamCT.phieugiamgia.loaiphieu==false?#numbers.formatDecimal(phieuGiamCT.phieugiamgia.giatrigiam, 0, 'COMMA', 0, 'POINT')+'&#x20ab;':phieuGiamCT.phieugiamgia.giatrigiam+' %, tối đa '+#numbers.formatDecimal(phieuGiamCT.phieugiamgia.giatrigiamtoida, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}"
                                                    style="font-family: 'Times New Roman'; font-size: 16px;">
                                                </p>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <h6 style="font-family: 'Times New Roman'; font-weight: bold">Tổng tiền
                                                    giảm
                                                    :</h6>
                                                <p th:text="${#numbers.formatDecimal(phieuGiamCT.tiengiam, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}"
                                                    style="font-family: 'Times New Roman'; font-size: 16px;">
                                                </p>
                                            </div>
                                            <hr class="border border-danger border-2 opacity-50">
                                            <div class="d-flex justify-content-between">
                                                <h6 style="font-family: 'Times New Roman'; font-weight: bold">Tổng tiền
                                                    thanh toán:</h6>
                                                <p th:text="${#numbers.formatDecimal(hoaDonDT.tongtien, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}"
                                                    style="font-family: 'Times New Roman'; font-size: 16px; color: red;">
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /.card -->
                                </div>
                                <!-- /.col -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <!-- /.container-fluid -->
                    </section>
                </div>
            </div>

            <!--Thông tin sản phẩm mua-->
            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <div class="d-flex justify-content-between align-content-center">
                                        <h3>
                                            Thông tin sản phẩm đã mua
                                        </h3>
                                        <button type="button" class="btn btn-success" data-bs-toggle="modal"
                                            data-bs-target="#modalThemSanPhamHD" id="changeSP"
                                            th:classappend="${trangThaiHienTai!=0?'disabled':''}">+ Thêm sản
                                            phẩm </button>
                                        <!--Modal thêm sản phẩm vào hóa đơn-->
                                        <!-- Modal -->
                                        <div class="modal fade" id="modalThemSanPhamHD" tabindex="-1"
                                            aria-labelledby="exampleModalThemSanPhamHD" aria-hidden="true">
                                            <div class="modal-dialog modal-xl modal-dialog-scrollable">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h3 class="modal-title fs-5" id="exampleModalThemSanPhamHD">Thêm
                                                            sản phẩm vào đơn hàng</h3>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                            aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="card-body">
                                                            <div class="d-flex justify-content-between">
                                                                <nav class="navbar bg-body-tertiary">
                                                                    <form>
                                                                        <div class="d-flex align-items-center">
                                                                            <input class="form-control me-2"
                                                                                type="search" id="tensp"
                                                                                placeholder="Nhập tên sản phẩm..."
                                                                                aria-label="Search"
                                                                                style="width: 984px;">
                                                                            <button type="button" id="reloadsp"
                                                                                class="btn btn-outline-warning"><i
                                                                                    class="bi bi-arrow-clockwise"></i></button>
                                                                        </div>
                                                                        <!--Bộ lọc-->
                                                                        <div class="align-items-center">
                                                                            <div class="d-flex justify-content-around">
                                                                                <div>
                                                                                    <label class="col-form-label">Chất
                                                                                        liệu</label>
                                                                                    <select class="form-select"
                                                                                        onchange="SearchSPHDCT()"
                                                                                        id="chatlieu"
                                                                                        style="width: 120px;">
                                                                                        <option value="all" selected>
                                                                                            ----</option>
                                                                                        <option
                                                                                            th:each="a:${dsChatLieu}"
                                                                                            th:value="${a.ten}"
                                                                                            th:text="${a.ten}">

                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                                <div>
                                                                                    <label class="col-form-label">Thương
                                                                                        hiệu</label>
                                                                                    <select class="form-select"
                                                                                        onchange="SearchSPHDCT()"
                                                                                        id="thuonghieu"
                                                                                        style="width: 120px;">
                                                                                        <option value="all" selected>
                                                                                            ----</option>
                                                                                        <option
                                                                                            th:each="a:${dsThuongHieu}"
                                                                                            th:value="${a.ten}"
                                                                                            th:text="${a.ten}">

                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                                <div>
                                                                                    <label class="col-form-label">Đế
                                                                                        giày</label>
                                                                                    <select class="form-select"
                                                                                        onchange="SearchSPHDCT()"
                                                                                        id="degiay"
                                                                                        style="width: 120px;">
                                                                                        <option value="all" selected>
                                                                                            ----</option>
                                                                                        <option th:each="a:${dsDe}"
                                                                                            th:value="${a.ten}"
                                                                                            th:text="${a.ten}">

                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                                <div>
                                                                                    <label class="col-form-label">Kích
                                                                                        cỡ</label>
                                                                                    <select class="form-select"
                                                                                        onchange="SearchSPHDCT()"
                                                                                        id="kichco"
                                                                                        style="width: 120px;">
                                                                                        <option value="all" selected>
                                                                                            ----</option>
                                                                                        <option th:each="a:${dsKichCo}"
                                                                                            th:value="${a.ten}"
                                                                                            th:text="${a.ten}">

                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                                <div>
                                                                                    <label class="col-form-label">Màu
                                                                                        sắc</label>
                                                                                    <select class="form-select"
                                                                                        oninput="SearchSPHDCT()"
                                                                                        id="mausac"
                                                                                        style="width: 120px;">
                                                                                        <option value="all" selected>
                                                                                            ----</option>
                                                                                        <option th:each="a:${dsMauSac}"
                                                                                            th:value="${a.ten}"
                                                                                            th:text="${a.ten}">

                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        <div class="d-flex justify-content-evenly">
                                                                            <div>
                                                                                <label class="col-form-label">Giới
                                                                                    tính</label>
                                                                                <select class="form-select"
                                                                                    onchange="SearchSPHDCT()"
                                                                                    id="gioitinh" style="width: 120px;">

                                                                                    <option value="true">Nam</option>
                                                                                    <option value="false">Nữ</option>
                                                                                </select>
                                                                            </div>
                                                                            <div>
                                                                                <label class="col-form-label">Khoảng
                                                                                    giá: <span
                                                                                        id="priceRangeValue">500,000 đ
                                                                                    </span></label>

                                                                                <div class="slidecontainer mt-1"
                                                                                    style="width: 495px;">
                                                                                    <input type="range" min="100000"
                                                                                        onchange="SearchSPHDCT()"
                                                                                        max="8000000" value="500000"
                                                                                        style="width: 100%;"
                                                                                        id="priceRange">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </form>
                                                                </nav>
                                                            </div>
                                                            <br>
                                                            <table class="table table-bordered table-hover text-center">
                                                                <thead class="table table-danger">
                                                                    <tr>
                                                                        <th>STT</th>
                                                                        <th>Ảnh sản phẩm</th>
                                                                        <th>Tên sản phẩm</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Kích cỡ</th>
                                                                        <th>Màu sắc</th>
                                                                        <th>Trạng thái</th>
                                                                        <th>Thao tác</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="tbl_sp_them">
                                                                </tbody>
                                                            </table>
                                                            <br>
                                                            <nav aria-label="Page navigation example" id="navAddSPHDCT">
                                                                <ul class="pagination">
                                                                    <li class="page-item" id="btn_prev_page"><a
                                                                            class="page-link"
                                                                            id="prevPageSP">Previous</a>
                                                                    </li>
                                                                    <li class="d-flex flex-row page-item"
                                                                        id="numberPageSP">


                                                                    </li>
                                                                    <li class="page-item" id="btn_next_page">
                                                                        <a class="page-link" id="nextPageSP">Next</a>
                                                                    </li>
                                                                </ul>
                                                            </nav>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--Kết thúc Modal thêm sản phẩm vào hóa đơn-->
                                    </div>
                                    <hr class="border border-danger border-2 opacity-50">
                                    <div class="card-body">
                                        <table class="table align-middle table-bordered table-hover">
                                            <thead class="table table-danger">
                                                <tr>
                                                    <th>STT</th>
                                                    <th>Ảnh sản phẩm</th>
                                                    <th>Thông tin sản phẩm</th>
                                                    <th>Màu sắc</th>
                                                    <th>Số lượng</th>
                                                    <th>Tổng tiền</th>
                                                    <th>Trạng thái</th>
                                                    <th colspan="2">Thao tác</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="a:${pageSPHD}">
                                                    <td th:text="${aStat.index+1}" style="vertical-align: middle;"></td>
                                                    <td style="vertical-align: middle;">
                                                        <img alt="" th:src="@{${a.sanphamchitiet.anh[0].tenanh}}"
                                                            style="height: 100px; width: 100px;">
                                                    </td>
                                                    <td style="vertical-align: middle; text-align: center;">
                                                        <p th:text="${a.sanphamchitiet.sanpham.tensanpham}"
                                                            style="font-family: 'Times New Roman'; font-size: 15px; font-weight: bold;">
                                                            ></p>
                                                        <p th:text="${#numbers.formatDecimal(a.giasanpham, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}"
                                                            style="font-family: 'Times New Roman'; font-size: 15px; color: red;font-weight: bold;">
                                                            ></p>
                                                        <p th:text="${'Size: '+a.sanphamchitiet.kichco.ten}"
                                                            style="font-family: 'Times New Roman'; font-size: 15px;font-weight: bold;">
                                                            ></p>
                                                    </td>
                                                    <td th:text="${a.sanphamchitiet.mausac.ten}"
                                                        style="vertical-align: middle;"></td>

                                                    <td style="vertical-align: middle;"><input
                                                            th:name="${a.sanphamchitiet.id}"
                                                            class="form-control form-control-sm" type="text"
                                                            th:id="${a.id}" oninput="changeQuantity(event)"
                                                            aria-label=".form-control-sm example" style="width: 100px;"
                                                            th:value="${a.soluong}"
                                                            th:readonly="${trangThaiHienTai != 0}"></td>

                                                    <td th:text="${#numbers.formatDecimal(a.giasanpham*a.soluong, 0, 'COMMA', 0, 'POINT')+'&#x20ab;'}"
                                                        style="color: red; vertical-align: middle;">
                                                    </td>
                                                    <td style="vertical-align: middle;">
                                                        <p style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: #007bff; padding: 3px 15px 3px 15px; color: white;"
                                                            th:text="${a.trangthai==true?'thành công':'thất bại'}"></p>
                                                    </td>
                                                    <td style="vertical-align: middle;">

                                                        <a th:if="${trangThaiHienTai==0}"
                                                            th:href="@{http://localhost:8080/hoa-don/delete-sp-hdct/{id}(id=${a.id})}">
                                                            <button class="btn btn-outline-danger"
                                                                onclick="return confirm('Bạn có muốn xóa sản phẩm này không?')"
                                                                type="button"><i class="bi bi-trash3"></i></button></a>


                                                        <button class="btn btn-outline-danger"
                                                            th:if="${trangThaiHienTai!=0}" disabled type="button"><i
                                                                class="bi bi-trash3"></i></button>


                                                        <button class="btn btn-outline-warning"
                                                            th:if="${trangThaiHienTai!=0}" disabled type="button"><i
                                                                class="bi bi-arrow-clockwise bi-warning"></i></button>

                                                        <a th:if="${trangThaiHienTai==0}" th:id="${a.id+'fsport'}"
                                                            th:href="@{http://localhost:8080/hoa-don/update-sp-hdct/{id}/{sl}(id=${a.id},sl=${a.soluong})}">
                                                            <button class="btn btn-outline-warning"
                                                                onclick="return confirm('Bạn có muốn cập nhật lại sản phẩm này không?')"
                                                                type="button"><i
                                                                    class="bi bi-arrow-clockwise bi-warning"></i></button></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <br>
                                        <nav aria-label="Page navigation example" th:if="${pageSPHD.totalPages>1}">
                                            <ul class="pagination">
                                                <li class="page-item" th:if="${pageSPHD.number>0}"><a class="page-link"
                                                        th:href="@{'?pageSP='+${pageSPHD.number-1}}">Previous</a>
                                                </li>
                                                <li class="page-item"
                                                    th:each="i:${#numbers.sequence(1,pageSPHD.totalPages)}"
                                                    th:classappend="${pageNo==i-1?'active':''}"><a class="page-link"
                                                        th:href="@{'?pageSP='+${i-1}}" th:text="${i}"></a></li>
                                                <li class="page-item" th:if="${pageSPHD.number<pageSPHD.totalPages-1}">
                                                    <a class="page-link"
                                                        th:href="@{'?pageSP='+${pageSPHD.number+1}}">Next</a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                            <!-- /.card -->
                        </div>
                        <!-- /.col -->
                    </div>
                    <!-- /.row -->
                </div>
                <!-- /.container-fluid -->
            </section>
        </div>
        <!--end -->
        <nav th:replace="~{/layoutadmin/footer.html}"></nav>

    </div>

    <!-- bắt đầu modal chỉnh số lượng add sp -->
    <div class="modal fade" id="quantityModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <!-- kết thúc modal chỉnh số lượng add sp -->



    <!-- ./sweetalert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- jQuery -->
    <script src="../plugins/jquery/jquery.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="plugins/jquery-ui/jquery-ui.min.js"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button)
    </script>
    <!-- Bootstrap 4 -->
    <script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- ChartJS -->
    <script src="../plugins/chart.js/Chart.min.js"></script>
    <!-- Sparkline -->
    <script src="../plugins/sparklines/sparkline.js"></script>
    <!-- JQVMap -->
    <script src="../plugins/jqvmap/jquery.vmap.min.js"></script>
    <script src="../plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
    <!-- jQuery Knob Chart -->
    <script src="../plugins/jquery-knob/jquery.knob.min.js"></script>
    <!-- daterangepicker -->
    <script src="../plugins/moment/moment.min.js"></script>
    <script src="../plugins/daterangepicker/daterangepicker.js"></script>
    <!-- Tempusdominus Bootstrap 4 -->
    <script src="../plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
    <!-- Summernote -->
    <script src="../plugins/summernote/summernote-bs4.min.js"></script>
    <!-- overlayScrollbars -->
    <script src="../plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../dist/js/adminlte.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../dist/js/demo.js"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="../dist/js/pages/dashboard.js"></script>

    <script>
        function getStatusName(number) {
            // Trả về tên trạng thái dựa trên số trạng thái đã tạo
            switch (number) {
                case 1:
                    return "Chờ xác nhận";
                case 2:
                    return "Đã xác nhận";
                case 3:
                    return "Chờ vận chuyển";
                case 4:
                    return "Đã xác nhận";
                case 5:
                    return "Chờ vận chuyển";
                case 6:
                    return "Đang vận chuyển";
                case 7:
                    return "Đã thanh toán";
                case 8:
                    return "Thành công";
                default:
                    return "Trạng thái mới " + number;
            }
        }

        function getDateTime() {
            var now = new Date();
            var date = now.toLocaleDateString('en-US');
            var time = now.toLocaleTimeString('en-US');
            return date + ' ' + time;
        }

        function getStatusIcon(number) {
            // Trả về đường dẫn của biểu tượng hình ảnh tương ứng với trạng thái
            switch (number) {
                case 1:
                    return "https://static.vecteezy.com/system/resources/previews/000/423/742/original/vector-truck-icon.jpg";
                case 2:
                    return "https://png.pngtree.com/png-vector/20190725/ourlarge/pngtree-invoice-icon-design-vector-png-image_1586820.jpg";
                case 3:
                    return "https://static.vecteezy.com/system/resources/previews/000/423/742/original/vector-truck-icon.jpg";
                case 4:
                    return "https://png.pngtree.com/png-vector/20190725/ourlarge/pngtree-invoice-icon-design-vector-png-image_1586820.jpg";
                case 5:
                    return "https://static.vecteezy.com/system/resources/previews/000/423/742/original/vector-truck-icon.jpg";
                case 6:
                    return "https://static.vecteezy.com/system/resources/previews/000/423/742/original/vector-truck-icon.jpg";
                case 7:
                    return "https://png.pngtree.com/png-vector/20190725/ourlarge/pngtree-invoice-icon-design-vector-png-image_1586820.jpg";
                case 8:
                    return "https://png.pngtree.com/png-vector/20190725/ourlarge/pngtree-invoice-icon-design-vector-png-image_1586820.jpg";
                default:
                    return "https://png.pngtree.com/png-vector/20190725/ourlarge/pngtree-invoice-icon-design-vector-png-image_1586820.jpg";
            }
        }
    </script>
    <!-- <script th:inline="javascript">
        var cities = /*[[${cities}]]*/[];
    </script> -->
    <!-- <script>
        function getDiaChi() {
            var selectedProvince = document.getElementById("tinhthanhpho").value;
            var quanhuyenSelect = document.getElementById("quanhuyen");

            // Lấy thông tin về tỉnh/thành phố đã chọn từ biến cities
            var selectedProvinceData = cities.find(function (city) {
                return city.name === selectedProvince;
            });

            if (selectedProvinceData) {
                selectedProvinceData.districts.forEach(function (district) {
                    var option = document.createElement("option");
                    option.text = district.name;
                    option.value = district.name;
                    quanhuyenSelect.appendChild(option);
                });
            }
        }

        function getQuanHuyen() {
            var selectedDistrict = document.getElementById("quanhuyen").value;
            var xaphuongSelect = document.getElementById("xaphuong");

            // Lấy thông tin về tỉnh/thành phố đã chọn từ biến cities
            var selectedProvince = document.getElementById("tinhthanhpho").value;
            var selectedProvinceData = cities.find(function (city) {
                return city.name === selectedProvince;
            });

            if (selectedProvinceData) {
                var selectedDistrictData = selectedProvinceData.districts.find(function (district) {
                    return district.name === selectedDistrict;
                });

                if (selectedDistrictData) {
                    selectedDistrictData.wards.forEach(function (ward) {
                        var option = document.createElement("option");
                        option.text = ward.name;
                        option.value = ward.name;
                        xaphuongSelect.appendChild(option);
                    });
                }
            }
        }

    </script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script>
        var citis = document.getElementById("city");
        var districts = document.getElementById("district");
        var wards = document.getElementById("ward");
        var Parameter = {
            url: "https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json",
            method: "GET",
            responseType: "application/json",
        };
        var promise = axios(Parameter);
        promise.then(function (result) {
            renderCity(result.data);
        });

        function renderCity(data) {
            for (const x of data) {
                var opt = document.createElement('option');
                opt.value = x.Name;
                opt.text = x.Name;
                opt.setAttribute('data-id', x.Id);
                citis.options.add(opt);
            }
            citis.onchange = function () {
                district.length = 1;
                ward.length = 1;
                if (this.options[this.selectedIndex].dataset.id != "") {
                    const result = data.filter(n => n.Id === this.options[this.selectedIndex].dataset.id);

                    for (const k of result[0].Districts) {
                        var opt = document.createElement('option');
                        opt.value = k.Name;
                        opt.text = k.Name;
                        opt.setAttribute('data-id', k.Id);
                        district.options.add(opt);
                    }
                }
            };
            district.onchange = function () {
                ward.length = 1;
                const dataCity = data.filter((n) => n.Id === citis.options[citis.selectedIndex].dataset.id);
                if (this.options[this.selectedIndex].dataset.id != "") {
                    const dataWards = dataCity[0].Districts.filter(n => n.Id === this.options[this.selectedIndex].dataset.id)[0].Wards;

                    for (const w of dataWards) {
                        var opt = document.createElement('option');
                        opt.value = w.Name;
                        opt.text = w.Name;
                        opt.setAttribute('data-id', w.Id);
                        wards.options.add(opt);
                    }
                }
            };
        }
    </script>

    <!-- thay đổi nhân viên hdct -->
    <script>
        let thisNumberPage = 0;

        var reload = document.getElementById('reloadnv');
        var btn = document.getElementById('changeNV');
        var nextPage = document.getElementById('nextPage');
        var prevPage = document.getElementById('prevPage');
        var navNV = document.getElementById('navNV');

        reload.onclick = function () {
            const pageNVChanges = localStorage.getItem("pageNVChanges") ?? 0;
            const url = `/hoa-don/viewNVChanges?pageNVChanges=${pageNVChanges}`;
            fetch(url)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let html = '';
                    let htmlNumberPage = '';
                    for (const hd of b.content) {
                        STT++;
                        html += `<tr>
                               <td>${STT}</td>
                               <td>${hd.manhanvien}</td>
                               <td>${hd.nguoidung.hovaten}</td>
                               <td>${hd.nguoidung.sodienthoai}</td>
                               <td>${hd.nguoidung.ngaysinh}</td>
                               <td>${hd.nguoidung.gioitinh == true ? 'Nam' : 'Nữ'}</td>
                               <td>
                                <a href="ChoseNV/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                 </td>
                            </tr>`;
                    }

                    if (thisNumberPage < 1) {
                        prevPage.style.display = 'none';
                    } else {
                        prevPage.style.display = 'block';
                    }
                    if (thisNumberPage >= b.totalPages - 1) {
                        nextPage.style.display = 'none';
                    } else {
                        nextPage.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPage += `
                        <a class="page-link" onclick="pageClick( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPage").innerHTML = htmlNumberPage;
                    document.getElementById("tbl_doi_nv").innerHTML = html;

                })
        }




        btn.onclick = function () {
            const pageNVChanges = localStorage.getItem("pageNVChanges") ?? 0;
            const url = `/hoa-don/viewNVChanges?pageNVChanges=${pageNVChanges}`;
            fetch(url)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let html = '';
                    let htmlNumberPage = '';
                    for (const hd of b.content) {
                        STT++;
                        html += `<tr>
                               <td>${STT}</td>
                               <td>${hd.manhanvien}</td>
                               <td>${hd.nguoidung.hovaten}</td>
                               <td>${hd.nguoidung.sodienthoai}</td>
                               <td>${hd.nguoidung.ngaysinh}</td>
                               <td>${hd.nguoidung.gioitinh == true ? 'Nam' : 'Nữ'}</td>
                               <td>
                                <a href="ChoseNV/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                 </td>
                            </tr>`;
                    }

                    if (thisNumberPage < 1) {
                        prevPage.style.display = 'none';
                    } else {
                        prevPage.style.display = 'block';
                    }
                    if (thisNumberPage >= b.totalPages - 1) {
                        nextPage.style.display = 'none';
                    } else {
                        nextPage.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPage += `
                        <a class="page-link" onclick="pageClick( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPage").innerHTML = htmlNumberPage;
                    document.getElementById("tbl_doi_nv").innerHTML = html;

                })
        }

        var searchNV = document.getElementById('searchNV');

        searchNV.onkeyup = function () {
            var keySearch = searchNV.value;
            var url = `/hoa-don/searchNV?keySearch=${keySearch}`;
            fetch(url)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let html = '';
                    for (const hd of b) {
                        STT++;
                        html += `<tr>
                       <td>${STT}</td>
                       <td>${hd.manhanvien}</td>
                       <td>${hd.nguoidung.hovaten}</td>
                       <td>${hd.nguoidung.sodienthoai}</td>
                       <td>${hd.nguoidung.ngaysinh}</td>
                       <td>${hd.nguoidung.gioitinh == true ? 'Nam' : 'Nữ'}</td>
                       <td>
                        <a href="ChoseNV/${hd.id}"><button
                        class="btn btn-warning">
                        chọn
                         </button></a>
                         </td>
                    </tr>`;
                    }
                    document.getElementById("tbl_doi_nv").innerHTML = html;
                })
        }


        function pageClick(number) {
            const pageNVChanges = localStorage.getItem("pageNVChanges") ?? number;
            const url = `/hoa-don/viewNVChanges?pageNVChanges=${pageNVChanges}`;
            fetch(url)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let html = '';
                    let htmlNumberPage = '';
                    for (const hd of b.content) {
                        STT++;
                        html += `<tr>
                               <td>${STT}</td>
                               <td>${hd.manhanvien}</td>
                               <td>${hd.nguoidung.hovaten}</td>
                               <td>${hd.nguoidung.sodienthoai}</td>
                               <td>${hd.nguoidung.ngaysinh}</td>
                               <td>${hd.nguoidung.gioitinh == true ? 'Nam' : 'Nữ'}</td>
                               <td>
                                <a href="ChoseNV/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                 </td>
                            </tr>`;
                    }
                    if (thisNumberPage < 1) {
                        prevPage.style.display = 'none';
                    } else {
                        prevPage.style.display = 'block';
                    }
                    if (thisNumberPage >= b.totalPages - 1) {
                        nextPage.style.display = 'none';
                    } else {
                        nextPage.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPage += `
                        <a class="page-link" onclick="pageClick( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPage").innerHTML = htmlNumberPage;
                    document.getElementById("tbl_doi_nv").innerHTML = html;

                })
        }

        nextPage.onclick = function () {
            thisNumberPage++;
            const pageNVChanges = localStorage.getItem("pageNVChanges") ?? thisNumberPage;
            const url = `/hoa-don/viewNVChanges?pageNVChanges=${pageNVChanges}`;
            fetch(url)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let html = '';
                    let htmlNumberPage = '';
                    for (const hd of b.content) {
                        STT++;
                        html += `<tr>
                               <td>${STT}</td>
                               <td>${hd.manhanvien}</td>
                               <td>${hd.nguoidung.hovaten}</td>
                               <td>${hd.nguoidung.sodienthoai}</td>
                               <td>${hd.nguoidung.ngaysinh}</td>
                               <td>${hd.nguoidung.gioitinh == true ? 'Nam' : 'Nữ'}</td>
                               <td>
                                <a href="ChoseNV/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                 </td>
                            </tr>`;
                    }
                    if (thisNumberPage < 1) {
                        prevPage.style.display = 'none';
                    } else {
                        prevPage.style.display = 'block';
                    }
                    if (thisNumberPage >= b.totalPages - 1) {
                        nextPage.style.display = 'none';
                    } else {
                        nextPage.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPage += `
                        <a class="page-link" onclick="pageClick( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPage").innerHTML = htmlNumberPage;
                    document.getElementById("tbl_doi_nv").innerHTML = html;

                })
        }



        prevPage.onclick = function () {

            thisNumberPage--;
            const pageNVChanges = localStorage.getItem("pageNVChanges") ?? thisNumberPage;
            const url = `/hoa-don/viewNVChanges?pageNVChanges=${pageNVChanges}`;
            fetch(url)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let html = '';
                    let htmlNumberPage = '';

                    for (const hd of b.content) {
                        STT++;
                        html += `<tr>
                               <td>${STT}</td>
                               <td>${hd.manhanvien}</td>
                               <td>${hd.nguoidung.hovaten}</td>
                               <td>${hd.nguoidung.sodienthoai}</td>
                               <td>${hd.nguoidung.ngaysinh}</td>
                               <td>${hd.nguoidung.gioitinh == true ? 'Nam' : 'Nữ'}</td>
                               <td>
                                <a href="ChoseNV/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                 </td>
                            </tr>`;
                    }
                    if (thisNumberPage < 1) {
                        prevPage.style.display = 'none';
                    } else {
                        prevPage.style.display = 'block';
                    }
                    if (thisNumberPage >= b.totalPages - 1) {
                        nextPage.style.display = 'none';
                    } else {
                        nextPage.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPage += `
                        <a class="page-link" onclick="pageClick( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPage").innerHTML = htmlNumberPage;
                    document.getElementById("tbl_doi_nv").innerHTML = html;

                })
        }

    </script>
    <!-- thay đổi sản phẩm hdct -->
    <script>
        let thisNumberSPPage = 0;
        var reloadSP = document.getElementById('reloadsp');
        var btnSP = document.getElementById('changeSP');
        var nextPageSP = document.getElementById('nextPageSP');
        var prevPageSP = document.getElementById('prevPageSP');
        var tensp = document.getElementById('tensp');
        var chatlieu = document.getElementById('chatlieu');
        var thuonghieu = document.getElementById('thuonghieu');
        var degiay = document.getElementById('degiay');
        var kichco = document.getElementById('kichco');
        var mausac = document.getElementById('mausac');
        var gioitinh = document.getElementById('gioitinh');
        var khoanggia = document.getElementById('priceRange');

        function SearchSPHDCT() {
            var tentim = tensp.value;
            var cl = chatlieu.value;
            var th = thuonghieu.value;
            var dg = degiay.value;
            var kc = kichco.value;
            var ms = mausac.value;
            var gt = gioitinh.value;
            var kg = khoanggia.value;
            var list = [
                tentim, cl, th, dg, kc, ms, gt, kg
            ]
            var urltimSPCT = `/hoa-don/searchSP?lstData=${list}`;
            fetch(urltimSPCT)
                .then(function (c) {
                    return c.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let htmlSP = '';
                    let htmlNumberPageSP = '';
                    for (const hd of b) {
                        STT++;
                        htmlSP += `<tr>
                                   <td style="vertical-align: middle;">${STT}</td>
                                   <td> 
                                    <img src="${hd.anh[0].tenanh}" alt=""
                                                                style="height: 100px; width: 100px;">
                                    
                                    </td>
                                   <td style="vertical-align: middle;">${hd.sanpham.tensanpham}</td>
                                   <td style="vertical-align: middle;">${hd.soluong}</td>
                                   <td style="vertical-align: middle;">${hd.kichco.ten}</td>
                                   <td style="vertical-align: middle;">${hd.mausac.ten}</td>
                                   <td style="vertical-align: middle;">
                                    <p  style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: green; padding: 3px 15px 3px 15px; color: white;">
                                        ${hd.trangthai == true ? 'Đang kinh doanh' : 'Ngừng kinh doanh'}
                                        </p>
                                    </td>
                                   <td style="vertical-align: middle;">
                                    <a href="ChoseSP/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                     </td>
                                </tr>`;
                    }
                    document.getElementById("tbl_sp_them").innerHTML = htmlSP;
                    document.getElementById('navAddSPHDCT').style.display = 'none';

                })
        }




        tensp.onkeyup = function () {
            var tentim = tensp.value;
            var cl = chatlieu.value;
            var th = thuonghieu.value;
            var dg = degiay.value;
            var kc = kichco.value;
            var ms = mausac.value;
            var gt = gioitinh.value;
            var kg = khoanggia.value;
            var list = [
                tentim, cl, th, dg, kc, ms, gt, kg
            ]
            var urltimSPCT = `/hoa-don/searchSP?lstData=${list}`;
            fetch(urltimSPCT)
                .then(function (c) {
                    return c.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let htmlSP = '';
                    let htmlNumberPageSP = '';
                    for (const hd of b) {
                        STT++;
                        htmlSP += `<tr>
                                   <td style="vertical-align: middle;">${STT}</td>
                                   <td> 
                                    <img src="${hd.anh[0].tenanh}" alt=""
                                                                style="height: 100px; width: 100px;">
                                    
                                    </td>
                                   <td style="vertical-align: middle;">${hd.sanpham.tensanpham}</td>
                                   <td style="vertical-align: middle;">${hd.soluong}</td>
                                   <td style="vertical-align: middle;">${hd.kichco.ten}</td>
                                   <td style="vertical-align: middle;">${hd.mausac.ten}</td>
                                   <td style="vertical-align: middle;">
                                    <p  style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: green; padding: 3px 15px 3px 15px; color: white;">
                                        ${hd.trangthai == true ? 'Đang kinh doanh' : 'Ngừng kinh doanh'}
                                        </p>
                                    </td>
                                   <td style="vertical-align: middle;">
                                    <a href="ChoseSP/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                     </td>
                                </tr>`;
                    }
                    document.getElementById("tbl_sp_them").innerHTML = htmlSP;
                    document.getElementById('navAddSPHDCT').style.display = 'none';

                })
        }







        reloadSP.onclick = function () {
            const pageSPChanges = localStorage.getItem("pageSPChanges") ?? 0;
            const urlPage = `/hoa-don/viewSPChanges?pageSPChanges=${pageSPChanges}`;

            fetch(urlPage)
                .then(function (c) {
                    return c.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let htmlSP = '';
                    let htmlNumberPageSP = '';
                    for (const hd of b.content) {
                        STT++;
                        htmlSP += `<tr>
                                   <td style="vertical-align: middle;">${STT}</td>
                                   <td> 
                                    <img src="${hd.anh[0].tenanh}" alt=""
                                                                style="height: 100px; width: 100px;">
                                    
                                    </td>
                                   <td style="vertical-align: middle;">${hd.sanpham.tensanpham}</td>
                                   <td style="vertical-align: middle;">${hd.soluong}</td>
                                   <td style="vertical-align: middle;">${hd.kichco.ten}</td>
                                   <td style="vertical-align: middle;">${hd.mausac.ten}</td>
                                   <td style="vertical-align: middle;">
                                    <p  style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: green; padding: 3px 15px 3px 15px; color: white;">
                                        ${hd.trangthai == true ? 'Đang kinh doanh' : 'Ngừng kinh doanh'}
                                        </p>
                                    </td>
                                   <td style="vertical-align: middle;">
                                    <a href="ChoseSP/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                     </td>
                                </tr>`;
                    }

                    if (thisNumberSPPage < 1) {
                        prevPageSP.style.display = 'none';
                    } else {
                        prevPageSP.style.display = 'block';
                    }
                    if (thisNumberSPPage >= b.totalPages - 1) {
                        nextPageSP.style.display = 'none';
                    } else {
                        nextPageSP.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPageSP += `
                        <a class="page-link" onclick="pageClickSP( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById('navAddSPHDCT').style.display = 'block';
                    document.getElementById("numberPageSP").innerHTML = htmlNumberPageSP;
                    document.getElementById("tbl_sp_them").innerHTML = htmlSP;


                })
        }


        btnSP.onclick = function () {
            const pageSPChanges = localStorage.getItem("pageSPChanges") ?? 0;
            const urlPage = `/hoa-don/viewSPChanges?pageSPChanges=${pageSPChanges}`;

            fetch(urlPage)
                .then(function (c) {
                    return c.json();
                })
                .then(function (b) {
                    var STT = 0;
                    let htmlSP = '';
                    let htmlNumberPageSP = '';
                    for (const hd of b.content) {
                        STT++;
                        htmlSP += `<tr>
                                   <td style="vertical-align: middle;">${STT}</td>
                                   <td> 
                                    <img src="${hd.anh[0].tenanh}" alt=""
                                                                style="height: 100px; width: 100px;">
                                    
                                    </td>
                                   <td style="vertical-align: middle;">${hd.sanpham.tensanpham}</td>
                                   <td style="vertical-align: middle;">${hd.soluong}</td>
                                   <td style="vertical-align: middle;">${hd.kichco.ten}</td>
                                   <td style="vertical-align: middle;">${hd.mausac.ten}</td>
                                   <td style="vertical-align: middle;">
                                    <p  style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: green; padding: 3px 15px 3px 15px; color: white;">
                                        ${hd.trangthai == true ? 'Đang kinh doanh' : 'Ngừng kinh doanh'}
                                        </p>
                                    </td>
                                   <td style="vertical-align: middle;">
                                    <a href="ChoseSP/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                     </td>
                                </tr>`;
                    }

                    if (thisNumberSPPage < 1) {
                        prevPageSP.style.display = 'none';
                    } else {
                        prevPageSP.style.display = 'block';
                    }
                    if (thisNumberSPPage >= b.totalPages - 1) {
                        nextPageSP.style.display = 'none';
                    } else {
                        nextPageSP.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPageSP += `
                        <a class="page-link" onclick="pageClickSP( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPageSP").innerHTML = htmlNumberPageSP;
                    document.getElementById("tbl_sp_them").innerHTML = htmlSP;

                })
        }

        function pageClickSP(numbers) {
            const pageSPChanges = localStorage.getItem("pageSPChanges") ?? numbers;
            const urlPage = `/hoa-don/viewSPChanges?pageSPChanges=${pageSPChanges}`;
            fetch(urlPage)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    console.log(b)
                    var STT = 0;
                    let htmlSP = '';
                    let htmlNumberPageSP = '';
                    for (const hd of b.content) {
                        STT++;
                        htmlSP += `<tr>
                                   <td style="vertical-align: middle;">${STT}</td>
                                   <td> 
                                    <img src="${hd.anh[0].tenanh}" alt=""
                                                                style="height: 100px; width: 100px;">
                                    
                                    </td>
                                   <td style="vertical-align: middle;">${hd.sanpham.tensanpham}</td>
                                   <td style="vertical-align: middle;">${hd.soluong}</td>
                                   <td style="vertical-align: middle;">${hd.kichco.ten}</td>
                                   <td style="vertical-align: middle;">${hd.mausac.ten}</td>
                                   <td style="vertical-align: middle;">
                                    <p  style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: green; padding: 3px 15px 3px 15px; color: white;">
                                        ${hd.trangthai == true ? 'Đang kinh doanh' : 'Ngừng kinh doanh'}
                                        </p>
                                    </td>
                                   <td style="vertical-align: middle;">
                                    <a href="ChoseSP/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                     </td>
                                </tr>`;
                    }

                    if (thisNumberSPPage < 1) {
                        prevPageSP.style.display = 'none';
                    } else {
                        prevPageSP.style.display = 'block';
                    }
                    if (thisNumberSPPage >= b.totalPages - 1) {
                        nextPageSP.style.display = 'none';
                    } else {
                        nextPageSP.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPageSP += `
                        <a class="page-link" onclick="pageClickSP( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPageSP").innerHTML = htmlNumberPageSP;
                    document.getElementById("tbl_sp_them").innerHTML = htmlSP;

                })
        }


        nextPageSP.onclick = function () {
            thisNumberSPPage++;
            const pageSPChanges = localStorage.getItem("pageSPChanges") ?? thisNumberSPPage;
            const urlPage = `/hoa-don/viewSPChanges?pageSPChanges=${pageSPChanges}`;
            fetch(urlPage)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    console.log(b)
                    var STT = 0;
                    let htmlSP = '';
                    let htmlNumberPageSP = '';
                    for (const hd of b.content) {
                        STT++;
                        htmlSP += `<tr>
                                   <td style="vertical-align: middle;">${STT}</td>
                                   <td> 
                                    <img src="${hd.anh[0].tenanh}" alt=""
                                                                style="height: 100px; width: 100px;">
                                    
                                    </td>
                                   <td style="vertical-align: middle;">${hd.sanpham.tensanpham}</td>
                                   <td style="vertical-align: middle;">${hd.soluong}</td>
                                   <td style="vertical-align: middle;">${hd.kichco.ten}</td>
                                   <td style="vertical-align: middle;">${hd.mausac.ten}</td>
                                   <td style="vertical-align: middle;">
                                    <p  style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: green; padding: 3px 15px 3px 15px; color: white;">
                                        ${hd.trangthai == true ? 'Đang kinh doanh' : 'Ngừng kinh doanh'}
                                        </p>
                                    </td>
                                   <td style="vertical-align: middle;">
                                    <a href="ChoseSP/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                     </td>
                                </tr>`;
                    }

                    if (thisNumberSPPage < 1) {
                        prevPageSP.style.display = 'none';
                    } else {
                        prevPageSP.style.display = 'block';
                    }
                    if (thisNumberSPPage >= b.totalPages - 1) {
                        nextPageSP.style.display = 'none';
                    } else {
                        nextPageSP.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPageSP += `
                        <a class="page-link" onclick="pageClickSP( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPageSP").innerHTML = htmlNumberPageSP;
                    document.getElementById("tbl_sp_them").innerHTML = htmlSP;

                })
        }



        prevPageSP.onclick = function () {

            thisNumberSPPage--;
            const pageSPChanges = localStorage.getItem("pageSPChanges") ?? thisNumberSPPage;
            const urlPage = `/hoa-don/viewSPChanges?pageSPChanges=${pageSPChanges}`;
            fetch(urlPage)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    console.log(b)
                    var STT = 0;
                    let htmlSP = '';
                    let htmlNumberPageSP = '';
                    for (const hd of b.content) {
                        STT++;
                        htmlSP += `<tr>
                                   <td style="vertical-align: middle;">${STT}</td>
                                   <td> 
                                    <img src="${hd.anh[0].tenanh}" alt=""
                                                                style="height: 100px; width: 100px;">
                                    
                                    </td>
                                   <td style="vertical-align: middle;">${hd.sanpham.tensanpham}</td>
                                   <td style="vertical-align: middle;">${hd.soluong}</td>
                                   <td style="vertical-align: middle;">${hd.kichco.ten}</td>
                                   <td style="vertical-align: middle;">${hd.mausac.ten}</td>
                                   <td style="vertical-align: middle;">
                                    <p  style="font-family: 'Times New Roman'; font-size: 15px; border-radius: 14px; background-color: green; padding: 3px 15px 3px 15px; color: white;">
                                        ${hd.trangthai == true ? 'Đang kinh doanh' : 'Ngừng kinh doanh'}
                                        </p>
                                    </td>
                                   <td style="vertical-align: middle;">
                                    <a href="ChoseSP/${hd.id}"><button
                                class="btn btn-warning">
                                chọn
                                 </button></a>
                                     </td>
                                </tr>`;
                    }

                    if (thisNumberSPPage < 1) {
                        prevPageSP.style.display = 'none';
                    } else {
                        prevPageSP.style.display = 'block';
                    }
                    if (thisNumberSPPage >= b.totalPages - 1) {
                        nextPageSP.style.display = 'none';
                    } else {
                        nextPageSP.style.display = 'block';
                    }
                    for (var i = 1; i <= b.totalPages; i++) {
                        htmlNumberPageSP += `
                        <a class="page-link" onclick="pageClickSP( ${i - 1})">
                                                                                    ${i}
                         </a>
                        `;
                    }
                    document.getElementById("numberPageSP").innerHTML = htmlNumberPageSP;
                    document.getElementById("tbl_sp_them").innerHTML = htmlSP;

                })
        }

    </script>
    <!-- tạo khoảng giá -->
    <script>
        // Lấy phần tử thanh trượt và phần tử hiển thị giá trị
        var priceRange = document.getElementById("priceRange");
        var priceRangeValue = document.getElementById("priceRangeValue");

        // Lắng nghe sự kiện khi người dùng thay đổi giá trị thanh trượt
        priceRange.oninput = function () {
            // Cập nhật giá trị hiển thị
            var show = this.value
                .replace(/\D/g, "")
                .replace(/([0-9])([0-9]{})$/, '$1.$2')
                .replace(/\B(?=(\d{3})+(?!\d)\.?)/g, ",");
            priceRangeValue.innerText = show + ' đ';
        };
    </script>

    <!-- <script>
        $('input.form-control').keyup(function (event) {
            $(this).val(function (index, value) {
                return value
                    .replace(/\D/g, "")
                    .replace(/([0-9])([0-9]{})$/, '$1.$2')
                    .replace(/\B(?=(\d{3})+(?!\d)\.?)/g, ",");
            });
        });
    </script> -->
    <!-- tạo khoảng giá -->
    <script>
        function thongbao(title, iconsz) {
            const Toast = Swal.mixin({
                toast: true,
                position: "top-end",
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.onmouseenter = Swal.stopTimer;
                    toast.onmouseleave = Swal.resumeTimer;
                }
            });

            Toast.fire({
                icon: iconsz,
                title: title
            });
        }

        async function changeQuantity(event) {
            const input = event.target;
            let inputValue = input.value;
            var idsp = input.name;
            var idhdct = input.id;

            // Loại bỏ tất cả các ký tự không phải số từ giá trị đầu vào
            inputValue = inputValue.replace(/\D/g, '');

            // Chuyển đổi giá trị thành số
            let numericValue = parseInt(inputValue);

            // Kiểm tra xem giá trị nhập vào có rỗng không
            if (inputValue === '') {
                input.value = '';
                return;
            }

            // Kiểm tra xem giá trị có nằm trong khoảng từ 1 đến 100 không
            var urlVLD = `http://localhost:8080/ban-hang-tai-quay/validate-SL?id=${idhdct}`;
            try {
                const response = await fetch(urlVLD);
                const data = await response.json();
                var slSpTrongDon = data.soluong;
                var slSpCon = data.sanphamchitiet.soluong;

                if (numericValue < 1 || isNaN(numericValue)) {
                    numericValue = 1;
                    thongbao('Số lượng phải lớn hơn 0', 'warning');
                } else if (numericValue-slSpTrongDon > slSpCon) {
                    numericValue = slSpCon+slSpTrongDon;
                    thongbao('Số lượng đang vượt quá số lượng hàng hiện có', 'warning');

                }

                // Cập nhật giá trị của input
                input.value = numericValue;

                var element = document.getElementById(input.id + 'fsport');
                //var newHref = "http://localhost:8080/hoa-don/update-sp-hdct/" + input.id + "/" + input.value;
                var newHref = "update-sp-hdct/" + input.id + "/" + input.value;
                element.setAttribute("href", newHref);
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // function changeQuantity(event) {
        //     const input = event.target;
        //     let inputValue = input.value;

        //     // Loại bỏ tất cả các ký tự không phải số từ giá trị đầu vào
        //     inputValue = inputValue.replace(/\D/g, '');

        //     // Chuyển đổi giá trị thành số
        //     let numericValue = parseInt(inputValue);

        //     // Kiểm tra xem giá trị nhập vào có rỗng không
        //     if (inputValue === '') {
        //         input.value = '';
        //         return;
        //     }

        //     // Kiểm tra xem giá trị có nằm trong khoảng từ 1 đến 100 không
        //     if (numericValue < 1 || isNaN(numericValue)) {
        //         numericValue = 1;
        //     } else if (numericValue > 100) {
        //         numericValue = 100;
        //     }

        //     // Cập nhật giá trị của input
        //     input.value = numericValue;

        //     var element = document.getElementById(input.id + 'fsport');
        //     var newHref = "update-sp-hdct/" + input.id + "/" + input.value;
        //     element.setAttribute("href", newHref);
        // }

    </script>


    <script>
        function validateInput(input) {
            var id = input.id + 'btn';
            var ider = input.id + 'er'
            var button = document.getElementById(id);
            var inputValue = input.value.trim();
            var errorMessage = "";

            if (inputValue === "") {
                errorMessage = "Chuỗi không được để trống";
            } else if (inputValue.length < 14) {
                errorMessage = "Chuỗi phải có ít nhất 14 kí tự";
            }

            if (errorMessage !== "") {
                // Nếu có lỗi, hiển thị thông báo và không cho phép nhấn button
                document.getElementById(ider).innerHTML = errorMessage;
                button.disabled = true;
            } else {
                document.getElementById(ider).innerHTML = "";
                button.disabled = false; // Cho phép nhấn button
            }
        }

        //chuyển tên city để so sánh
        function extractLocation(input) {
            // Chuyển chuỗi về dạng chữ thường để so sánh
            const lowerCaseInput = input.toLowerCase();

            // Kiểm tra và tách từ "tỉnh" hoặc "thành phố"
            if (lowerCaseInput.startsWith("tỉnh ")) {
                // Tách từ "tỉnh" và lấy phần còn lại
                const province = input.slice(5).trim();
                return { type: "tỉnh", name: province };
            } else if (lowerCaseInput.startsWith("thành phố ")) {
                // Tách từ "thành phố" và lấy phần còn lại
                const city = input.slice(10).trim();
                return { type: "thành phố", name: city };
            } else {
                return { type: "unknown", name: input.trim() };
            }
        }
        // <!-- //call api ngày giao dự kiến -->

        function callIdCity(thanhpho, huyen, xa) {
            var tencity = extractLocation(thanhpho);
            var tenhuyen = huyen;
            var tenxa = xa;

            var idCityreturn;
            var idHuyenreturn;
            var idXareturn;

            var Parameter = {
                url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/province",
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "Token": "59db4e6a-23e7-11ef-8c74-4ad7faca6bdc"
                }
            };
            axios(Parameter)
                .then(function (a) {
                    return a.data;
                })
                .then(function (b) {
                    // tách id thành phố
                    for (const id of b.data) {
                        if (id.ProvinceName.toLowerCase() === tencity.name.toLowerCase()) {
                            idCityreturn = id.ProvinceID;
                        }
                    }

                    var requestDataHuyen = {
                        province_id: idCityreturn
                    };

                    // Cấu hình yêu cầu với axios, bao gồm Token và dữ liệu gửi đi
                    var ParameterHuyen = {
                        url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/district",
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Token": "59db4e6a-23e7-11ef-8c74-4ad7faca6bdc"
                        },
                        data: JSON.stringify(requestDataHuyen)
                    };

                    // Gửi yêu cầu và xử lý phản hồi
                    axios(ParameterHuyen)
                        .then(function (response) {
                            return response.data;
                        })
                        .then(function (d) {
                            //tách id huyện
                            for (const id of d.data) {
                                if (id.DistrictName.toLowerCase() === tenhuyen.toLowerCase()) {
                                    idHuyenreturn = id.DistrictID;
                                }
                            }
                            //tách id xã 
                            var requestData = {
                                district_id: idHuyenreturn
                            };

                            // Cấu hình yêu cầu với axios, bao gồm Token và dữ liệu gửi đi
                            var Parameter = {
                                url: "https://online-gateway.ghn.vn/shiip/public-api/master-data/ward?district_id",
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json",
                                    "Token": "59db4e6a-23e7-11ef-8c74-4ad7faca6bdc"
                                },
                                data: JSON.stringify(requestData)
                            };

                            // Gửi yêu cầu và xử lý phản hồi
                            axios(Parameter)
                                .then(function (response) {
                                    return response.data;
                                })
                                .then(function (d) {
                                    //tách id xã
                                    for (const id of d.data) {
                                        if (id.WardName.toLowerCase() === tenxa.toLowerCase()) {
                                            idXareturn = id.WardCode;
                                        }
                                    }


                                    var requestDataDate = {
                                        from_district_id: 3440,//địa chỉ mặc địch của shop
                                        from_ward_code: "13007",//địa chỉ mặc địch của shop
                                        to_district_id: idHuyenreturn,
                                        to_ward_code: idXareturn.toString(),
                                        service_id: 53320
                                    };

                                    // Cấu hình yêu cầu với axios, bao gồm Token và dữ liệu gửi đi
                                    var ParameterDate = {
                                        url: "https://online-gateway.ghn.vn/shiip/public-api/v2/shipping-order/leadtime",
                                        method: "POST",
                                        headers: {
                                            "Content-Type": "application/json",
                                            "Token": "59db4e6a-23e7-11ef-8c74-4ad7faca6bdc",
                                            "ShopId": "5115739"
                                        },
                                        data: JSON.stringify(requestDataDate)
                                    };
                                    // Gửi yêu cầu và xử lý phản hồi
                                    axios(ParameterDate)
                                        .then(function (response) {
                                            return response.data; // In dữ liệu ra console
                                        })
                                        .then(function (d) {
                                            // Số nguyên đại diện cho một thời điểm trong JavaScript (ví dụ: số giây kể từ Epoch)
                                            var timestamp = d.data.leadtime;
                                            var urlsetdate = `http://localhost:8080/hoa-don/set-ngay-giao-du-kien/${timestamp}`;
                                            callController(urlsetdate);
                                        })
                                })


                        })
                })

        }
        //test thử
        function xacnhanngaygiao() {

            //http://localhost:8080/hoa-don/set-ngay-giao-du-kien/{date}
            var urlAPI = `http://localhost:8080/hoa-don/call-api-ngay-giao`;
            fetch(urlAPI)
                .then(function (a) {
                    return a.json();
                })
                .then(function (b) {
                    callIdCity(b[0], b[1], b[2]);
                })
        }

        function callController(url) {
            fetch(url)
        }

    </script>


</body>

</html>